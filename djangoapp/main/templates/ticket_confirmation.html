{% extends 'main/base.html' %}
{% block title %}Booking Confirmed - Evergrove Wildlife Park{% endblock %}
{% block content %}

<div class="container py-5">
  {% if error %}
  <!-- ERROR STATE -->
  <div style="max-width: 600px; margin: 0 auto; text-align: center; padding: 3rem;">
    <div style="font-size: 5rem; margin-bottom: 1rem;">‚ùå</div>
    <h2 style="color: #dc3545; margin-bottom: 1rem;">Oops!</h2>
    <p style="font-size: 1.2rem; color: #666;">{{ error }}</p>
    <a href="{% url 'ticket_booking' %}" class="btn btn-success btn-lg mt-4" style="border-radius: 50px; padding: 1rem 3rem;">
      Book Again
    </a>
  </div>
  
  {% else %}
  <!-- SUCCESS STATE -->
  <div style="max-width: 700px; margin: 0 auto; animation: fadeInUp 0.6s ease;">
    <!-- Success Icon -->
    <div style="text-align: center; margin-bottom: 2rem;">
      <div style="width: 100px; height: 100px; background: linear-gradient(135deg, #4a7c2c, #7fb069); border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; box-shadow: 0 10px 40px rgba(74, 124, 44, 0.3); animation: scaleIn 0.5s ease;">
        <span style="font-size: 3rem;">‚úì</span>
      </div>
      <h1 style="color: #2d5016; font-weight: 800; margin-top: 1.5rem; font-size: 2.5rem;">Booking Confirmed!</h1>
      <p style="color: #666; font-size: 1.2rem;">Your adventure awaits at Evergrove Wildlife Park</p>
    </div>
    
    <!-- Ticket Details Card -->
    <div style="background: white; border-radius: 25px; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1); overflow: hidden; margin-bottom: 2rem;">
      <!-- Header -->
      <div style="background: linear-gradient(135deg, #2d5016, #4a7c2c); padding: 2rem; text-align: center;">
        <h3 style="color: white; margin: 0; font-weight: 700;">E-Ticket</h3>
        <p style="color: rgba(255,255,255,0.9); margin: 0.5rem 0 0 0; font-size: 1.1rem;">
          Ticket ID: #{{ ticket.ticket_id }}
        </p>
      </div>
      
      <!-- Details -->
      <div style="padding: 2.5rem;">
        <div style="margin-bottom: 1.5rem;">
          <label style="color: #888; font-size: 0.9rem; text-transform: uppercase; letter-spacing: 1px; display: block; margin-bottom: 0.5rem;">Visitor Name</label>
          <div style="color: #2d5016; font-size: 1.3rem; font-weight: 600;">{{ ticket.visitor.visitor_name }}</div>
        </div>
        
        <div style="margin-bottom: 1.5rem;">
          <label style="color: #888; font-size: 0.9rem; text-transform: uppercase; letter-spacing: 1px; display: block; margin-bottom: 0.5rem;">Contact Number</label>
          <div style="color: #2d5016; font-size: 1.3rem; font-weight: 600;">{{ ticket.visitor.contact_no }}</div>
        </div>
        
        <div style="margin-bottom: 1.5rem;">
          <label style="color: #888; font-size: 0.9rem; text-transform: uppercase; letter-spacing: 1px; display: block; margin-bottom: 0.5rem;">Visit Date</label>
          <div style="color: #2d5016; font-size: 1.3rem; font-weight: 600;">{{ ticket.visit_date|date:"F d, Y" }}</div>
        </div>

        <div style="margin-bottom: 1.5rem;">
          <label style="color: #888; font-size: 0.9rem; text-transform: uppercase; letter-spacing: 1px; display: block; margin-bottom: 0.5rem;">Visitor Count</label>
          <div style="color: #2d5016; font-size: 1.3rem; font-weight: 600;">{{ ticket.visitor_count }}</div>
        </div>
        
        <div style="margin-bottom: 1.5rem;">
          <label style="color: #888; font-size: 0.9rem; text-transform: uppercase; letter-spacing: 1px; display: block; margin-bottom: 0.5rem;">Package</label>
          <div style="color: #2d5016; font-size: 1.3rem; font-weight: 600;">{{ ticket.package.package_name }}</div>
          {% if ticket.package.duration %}
          <div style="color: #666; font-size: 0.95rem; margin-top: 0.25rem;">Duration: {{ ticket.package.duration }} hours</div>
          {% endif %}
        </div>
        
        <div style="background: linear-gradient(135deg, rgba(127, 176, 105, 0.1), rgba(74, 124, 44, 0.1)); padding: 1.5rem; border-radius: 15px; border-left: 4px solid #4a7c2c;">
          <label style="color: #888; font-size: 0.9rem; text-transform: uppercase; letter-spacing: 1px; display: block; margin-bottom: 0.5rem;">Total Amount</label>
          <div style="color: #2d5016; font-size: 2rem; font-weight: 800;">‚Çπ{{ ticket.package.price }}</div>
          
          <div style="color: #666; font-size: 0.9rem; margin-top: 0.25rem;">Payment Mode: {{ ticket.payment_mode }}</div>
        </div>
      </div>
    </div>
    
    <!-- Important Information -->
    <div style="background: #fff3cd; border-left: 4px solid #ffc107; padding: 1.5rem; border-radius: 15px; margin-bottom: 2rem;">
      <h5 style="color: #856404; margin-bottom: 1rem; font-weight: 700;">üìã Important Information</h5>
      <ul style="color: #856404; margin: 0; padding-left: 1.5rem;">
        <li style="margin-bottom: 0.5rem;">Please arrive 15 minutes before your scheduled tour</li>
        <li style="margin-bottom: 0.5rem;">Carry a valid ID proof for verification</li>
        <li style="margin-bottom: 0.5rem;">Show this ticket at the entrance gate</li>
        <li>Follow park guidelines for a safe experience</li>
      </ul>
    </div>
    
    <!-- Action Buttons -->
    <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
      <button onclick="window.print()" class="btn btn-success btn-lg" style="flex: 1; border-radius: 50px; padding: 1rem 2rem; min-width: 200px;">
        üñ®Ô∏è Print Ticket
      </button>
      <a href="{% url 'visitor_home' %}" class="btn btn-outline-success btn-lg" style="flex: 1; border-radius: 50px; padding: 1rem 2rem; min-width: 200px; border: 2px solid #4a7c2c; color: #4a7c2c; text-decoration: none;">
        üè† Back to Home
      </a>
    </div>
  </div>
  {% endif %}
</div>

<!-- ANIMATIONS -->
<style>
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes scaleIn {
  from {
    transform: scale(0);
  }
  to {
    transform: scale(1);
  }
}

@media print {
  nav, footer, button, .btn-outline-success {
    display: none !important;
  }
  
  body {
    background: white !important;
  }
}
</style>

{% endblock %}