{% extends 'main/base.html' %}
{% block navbar %}
{% endblock %}
{% block title %}Staff Management{% endblock %}
{% block content %}

<!-- Admin Top Navigation -->
<div style="background: linear-gradient(135deg, #1a3d1e, #234f24); padding: 2rem 0; margin-bottom: 2rem;">
  <div class="container">
    <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1rem;">
      <div>
        <h2 style="color: white; margin: 0; font-weight: 700; font-size: 2rem;">üó∫Ô∏è Staff Management</h2>
<p style="color: rgba(255,255,255,0.8); margin: 0.5rem 0 0 0;">Manage staff members and their roles</p>
      </div>
      <a href="{% url 'admin_dashboard' %}" class="btn btn-outline-light" style="border-radius: 25px; padding: 0.7rem 2rem;">
        ‚Üê Back to Dashboard
      </a>
    </div>
  </div>
</div>

<!-- Main Content -->
<div class="admin-page">
  <div class="container-fluid">
    <!-- Page Header -->
    <div class="page-header">
      
      <a href="{% url 'staff_add' %}" class="btn-primary">
        <span>+</span> Add Staff
      </a>
    </div>
    
    <!-- Staff Table -->
    <div class="table-container">
      <table class="data-table">
        <thead>
          <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Role</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for s in staff %}
          <tr>
            <td><span class="id-badge">{{ s.staff_id }}</span></td>
            <td class="name-cell">{{ s.staff_name }}</td>
            <td><span class="role-badge">{{ s.staff_role }}</span></td>
            <td class="actions-cell">
              <a href="{% url 'staff_edit' s.staff_id %}" class="btn-icon btn-edit" title="Edit">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                  <path d="M11.333 2.00004C11.5081 1.82494 11.716 1.68605 11.9447 1.59129C12.1735 1.49653 12.4187 1.44775 12.6663 1.44775C12.914 1.44775 13.1592 1.49653 13.3879 1.59129C13.6167 1.68605 13.8246 1.82494 13.9997 2.00004C14.1748 2.17513 14.3137 2.383 14.4084 2.61178C14.5032 2.84055 14.552 3.08575 14.552 3.33337C14.552 3.58099 14.5032 3.82619 14.4084 4.05497C14.3137 4.28374 14.1748 4.49161 13.9997 4.66671L5.33301 13.3334L1.33301 14.6667L2.66634 10.6667L11.333 2.00004Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </a>
              <a href="{% url 'staff_delete' s.staff_id %}" 
                 class="btn-icon btn-delete" 
                 title="Delete"
                 onclick="return confirm('Delete {{ s.staff_name }}?');">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                  <path d="M2 4H3.33333H14" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                  <path d="M5.33301 4.00004V2.66671C5.33301 2.31309 5.47348 1.97395 5.7235 1.72390C5.97353 1.47385 6.31272 1.33337 6.66634 1.33337H9.33301C9.68663 1.33337 10.0258 1.47385 10.2758 1.72390C10.5259 1.97395 10.6663 2.31309 10.6663 2.66671V4.00004M12.6663 4.00004V13.3334C12.6663 13.687 12.5259 14.0261 12.2758 14.2762C12.0258 14.5262 11.6866 14.6667 11.333 14.6667H4.66634C4.31272 14.6667 3.97358 14.5262 3.72353 14.2762C3.47348 14.0261 3.33301 13.687 3.33301 13.3334V4.00004H12.6663Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </a>
            </td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="4" class="empty-state">
              No staff members found
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>

<style>
/* Hide visitor navbar on admin pages */
body:has(.admin-top-nav) nav.navbar {
  display: none;
}

body:has(.admin-top-nav) main {
  padding: 0 !important;
  margin: 0 !important;
}

/* Admin Top Navigation */
.admin-top-nav {
  background: white;
  border-bottom: 1px solid #e5e7eb;
  position: sticky;
  top: 0;
  z-index: 100;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
}

.admin-top-nav .container-fluid {
  display: flex;
  align-items: center;
  gap: 2rem;
  padding: 1rem 2rem;
  max-width: 100%;
}

.nav-brand h3 {
  margin: 0;
  font-size: 1.25rem;
  font-weight: 700;
  color: #1a4d2e;
}

.admin-nav-links {
  display: flex;
  gap: 0.5rem;
  flex: 1;
}

.admin-nav-links .nav-link {
  padding: 0.625rem 1rem;
  color: #6b7280;
  text-decoration: none;
  font-weight: 500;
  border-radius: 6px;
  transition: all 0.2s;
  font-size: 0.95rem;
}

.admin-nav-links .nav-link:hover {
  background: #f3f4f6;
  color: #111827;
}

.admin-nav-links .nav-link.active {
  background: #f0fdf4;
  color: #1a4d2e;
}

.nav-actions {
  display: flex;
  align-items: center;
  gap: 1rem;
}

.admin-user {
  color: #6b7280;
  font-size: 0.95rem;
  font-weight: 500;
}

.btn-logout {
  padding: 0.5rem 1rem;
  background: #fee2e2;
  color: #dc2626;
  border-radius: 6px;
  text-decoration: none;
  font-weight: 600;
  font-size: 0.9rem;
  transition: all 0.2s;
}

.btn-logout:hover {
  background: #fecaca;
}

/* Admin Page Content */
.admin-page {
  background: #f8f9fa;
  min-height: calc(100vh - 200px);
  padding: 2rem 0;
}

.container-fluid {
  padding-left: 2rem;
  padding-right: 2rem;
}

.page-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 2rem;
  flex-wrap: wrap;
  gap: 1rem;
}

.page-header h1 {
  font-size: 1.875rem;
  font-weight: 700;
  color: #111827;
  margin-bottom: 0.25rem;
}

.page-header p {
  color: #6b7280;
  margin: 0;
  font-size: 0.95rem;
}

.btn-primary {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.75rem 1.5rem;
  background: #1a4d2e;
  color: white;
  border-radius: 8px;
  text-decoration: none;
  font-weight: 600;
  font-size: 0.95rem;
  transition: all 0.2s;
}

.btn-primary:hover {
  background: #2d6a4f;
  transform: translateY(-1px);
}

/* Table */
.table-container {
  background: white;
  border-radius: 12px;
  border: 1px solid #e5e7eb;
  overflow: hidden;
}

.data-table {
  width: 100%;
  border-collapse: collapse;
}

.data-table thead {
  background: #f9fafb;
  border-bottom: 1px solid #e5e7eb;
}

.data-table th {
  padding: 1rem 1.5rem;
  text-align: left;
  font-weight: 600;
  font-size: 0.875rem;
  color: #374151;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.data-table tbody tr {
  border-bottom: 1px solid #f3f4f6;
  transition: background 0.2s;
}

.data-table tbody tr:hover {
  background: #f9fafb;
}

.data-table tbody tr:last-child {
  border-bottom: none;
}

.data-table td {
  padding: 1rem 1.5rem;
  color: #111827;
  font-size: 0.95rem;
}

.id-badge {
  display: inline-block;
  padding: 0.25rem 0.75rem;
  background: #f3f4f6;
  color: #374151;
  border-radius: 6px;
  font-size: 0.875rem;
  font-weight: 600;
  font-family: 'Monaco', 'Courier New', monospace;
}

.name-cell {
  font-weight: 600;
  color: #111827;
}

.role-badge {
  display: inline-block;
  padding: 0.375rem 0.875rem;
  background: #fef3c7;
  color: #92400e;
  border-radius: 6px;
  font-size: 0.875rem;
  font-weight: 500;
}

.actions-cell {
  display: flex;
  gap: 0.5rem;
}

.btn-icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 36px;
  height: 36px;
  border-radius: 6px;
  border: 1px solid #e5e7eb;
  background: white;
  color: #6b7280;
  transition: all 0.2s;
  text-decoration: none;
  cursor: pointer;
}

.btn-icon:hover {
  border-color: #d1d5db;
  background: #f9fafb;
}

.btn-edit:hover {
  color: #1a4d2e;
  border-color: #1a4d2e;
}

.btn-delete:hover {
  color: #dc2626;
  border-color: #dc2626;
}

.empty-state {
  text-align: center;
  padding: 3rem !important;
  color: #9ca3af;
}

/* Responsive */
@media (max-width: 1024px) {
  .admin-nav-links {
    display: none;
  }
}

@media (max-width: 768px) {
  .admin-top-nav .container-fluid {
    padding: 1rem;
  }
  
  .container-fluid {
    padding-left: 1rem;
    padding-right: 1rem;
  }
  
  .admin-user {
    display: none;
  }
}
</style>

{% endblock %}